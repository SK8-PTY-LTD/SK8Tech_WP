jQuery(document).ready(function(a){function f(b){a(".epkb-panel-container .epkb-tab-panel:nth-child("+(b+1)+")").addClass("active")}function g(a,b){var c=window.location.href;c=h(c,"top-category",b),window.history.pushState({tab:a},"title",c)}function h(a,b,c){var d=new RegExp("([?&])"+b+"=.*?(&|$)","i"),e=-1!==a.indexOf("?")?"&":"?";return a.match(d)?a.replace(d,"$1"+b+"="+c+"$2"):a+e+b+"="+c}var b=a("#epkb-main-page-container"),c=a("#epkb-content-container"),d=a(".epkb-nav-tabs li"),e=a(".epkb-tab-panel");a("body").on("submit","#epkb_search_form",function(b){if(b.preventDefault(),""!=a("#epkb_search_terms").val()){var c={action:"epkb-search-kb",epkb_kb_id:a("#epkb_kb_id").val(),search_words:a("#epkb_search_terms").val()},d="";a.ajax({type:"GET",dataType:"json",data:c,url:ajaxurl,beforeSend:function(b){a(".loading-spinner").css("display","block"),a("#epkb-ajax-in-progress").show()}}).done(function(b){b=b||"",a(".loading-spinner").css("display","none"),d=b.error||"success"!=b.status?epkb_vars.msg_try_again:b.search_result}).fail(function(a,b,c){d=epkb_vars.msg_try_again+". ["+(c||epkb_vars.unknown_error)+"]"}).always(function(){a("#epkb-ajax-in-progress").hide(),d&&(a("#epkb_search_results").css("display","block"),a("#epkb_search_results").html(d))})}}),a("#epkb_search_terms").keyup(function(){this.value||a("#epkb_search_results").css("display","none")}),a(window).load(function(){var b=0;c.find(d).each(function(){var c=a(this).outerHeight(!0);c>b&&(b=c)}),c.find(d).css("min-height",b)}),window.onpopstate=function(b){b.state&&-1!==b.state.tab.indexOf("epkb_tab_")?(c.find(".epkb_top_panel").removeClass("active"),a("#main-category-selection").length>0?a("#main-category-selection").val(c.find("#"+b.state.tab).val()):(c.find(".epkb_top_categories").removeClass("active"),c.find("#"+b.state.tab).addClass("active")),c.find("."+b.state.tab).addClass("active")):a("#epkb_tab_1").length>0&&!c.find("#epkb_tab_1").hasClass("active")&&(c.find(".epkb_top_panel").removeClass("active"),a("#main-category-selection").length>0?a("#main-category-selection").val(c.find("#epkb_tab_1").val()):(c.find(".epkb_top_categories").removeClass("active"),c.find("#epkb_tab_1").addClass("active")),c.find(".epkb_tab_1").addClass("active"))},c.find(d).each(function(){a(this).on("click",function(){c.find(d).removeClass("active"),a(this).addClass("active"),c.find(e).removeClass("active"),f(a(this).index()),g(a(this).attr("id"),a(this).data("cat-name"))})}),a("#main-category-selection").change(function(){c.find(e).removeClass("active"),a("#main-category-selection option:selected").each(function(){f(a(this).index()),g(a(this).attr("id"),a(this).data("cat-name"))})}),a(".epkb-section-body .epkb-category-level-2-3").each(function(){a(this).on("click",function(){a(this).next().toggleClass("active")})}),c.find(".epkb-section-body .epkb-category-level-2-3").each(function(){var b=a(this).find("i");a(this).on("click",function(){function h(a){b.hasClass(a[0])?(b.removeClass(a[0]),b.addClass(a[1])):b.hasClass(a[1])&&(b.removeClass(a[1]),b.addClass(a[0]))}var a=["ep_icon_plus","ep_icon_minus"],c=["ep_icon_plus_box","ep_icon_minus_box"],d=["ep_icon_right_arrow","ep_icon_down_arrow"],e=["ep_icon_arrow_carrot_right","ep_icon_arrow_carrot_down"],f=["ep_icon_arrow_carrot_right_circle","ep_icon_arrow_carrot_down_circle"],g=["ep_icon_folder_add","ep_icon_folder_open"];h(a),h(c),h(d),h(e),h(f),h(g)})}),b.find(".epkb-show-all-articles").on("click",function(){a(this).toggleClass("active");var b=a(this).parent("ul"),c=b.find("li");a(this).hasClass("active")?(a(this).find(".epkb-show-text").addClass("epkb-hide-elem"),a(this).find(".epkb-hide-text").removeClass("epkb-hide-elem")):(a(this).find(".epkb-show-text").removeClass("epkb-hide-elem"),a(this).find(".epkb-hide-text").addClass("epkb-hide-elem")),a(c).each(function(){a(this).hasClass("epkb-hide-elem")?(a(this).removeClass("epkb-hide-elem"),a(this).addClass("visible")):a(this).hasClass("visible")&&(a(this).removeClass("visible"),a(this).addClass("epkb-hide-elem"))})})});