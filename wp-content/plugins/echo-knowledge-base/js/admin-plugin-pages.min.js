jQuery(document).ready(function(a){function c(a,b,c){return'<div class="epkb-top-notice-message"><div class="contents"><span class="'+c+'">'+(a?"<h4>"+a+"</h4>":"")+(b||"")+"</span></div></div>"}var b=a("#ekb-admin-page-wrap");!function(){!function(){function c(c,d){b.find(c+" > .nav_tab").on("click",function(){b.find(c+" > .nav_tab").removeClass("active"),a(this).addClass("active"),b.find(d+" > .ekb-admin-page-tab-panel").removeClass("active");var e=a(this).index()+1;b.find(d+" > .ekb-admin-page-tab-panel:nth-child( "+e+" ) ").addClass("active")})}c("#welcome_tab_nav","#welcome_panel_container"),c(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels"),c(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels"),c("#help_tabs_nav","#help_tab_panel")}(),function(){function b(b,c){a(b).epkb_displayOnClick({content:c}),a("body").on("click",function(){a(c).fadeOut(200),a(b).removeClass("active")})}a.fn.epkb_displayOnClick=function(b){var c=a.extend({content:null,class:"active",fadeSpeed:200},b),d=a(this);return d.on("click",function(b){b.stopPropagation(),a(c.content).fadeToggle(c.fadeSpeed),d.toggleClass(c.class),a(c.content).toggleClass("active-content")}),a(c.content).on("click",function(a){a.stopPropagation()}),d},b(".more_tabs",".drop_down_tabs > ul")}()}(),function(){b.find(".save_settings").on("click",function(b){b.preventDefault();var d="";a(".epkb-top-notice-message").remove();var e={action:"epkb_save_settings",_wpnonce_epkb_save_settings:a("#_wpnonce_epkb_save_settings").val(),form:a("#epkb_settings_form").serialize()};a.ajax({type:"POST",dataType:"json",data:e,url:ajaxurl,beforeSend:function(b){a("#epkb-ajax-in-progress").dialog("open")}}).done(function(b){function e(){location.reload()}b=b||"",b.error||void 0==b.message?d=b.message?b.message:c("",epkb_vars.reload_try_again,"error"):(d=b.message,d.indexOf("reload")>=0&&(d=d.replace("reload ",""),a("#ekb_core_top_heading").replaceWith(d),d="",a("html, body").animate({scrollTop:0},"slow"),window.setTimeout(e,2e3)))}).fail(function(a,b,e){d=e?" ["+e+"]":epkb_vars.unknown_error,d=c(epkb_vars.not_saved+" "+epkb_vars.msg_try_again,d,"error")}).always(function(){a("#epkb-ajax-in-progress").dialog("close"),d&&(a("#ekb_core_top_heading").replaceWith(d),a("html, body").animate({scrollTop:0},"slow"))})})}(),function(){b.find("#epkb_send_feedback").on("click",function(d){b.find(".required").remove(),a(".epkb-top-notice-message").remove(),d.preventDefault();var e="",f=b.find("#your_feedback").val().trim(),g=b.find("#your_email").val().trim(),h=b.find("#your_name").val().trim(),i=!0;if(f||(b.find("#your_feedback").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),i=!1),g||(b.find("#your_email").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),i=!1),h||(b.find("#your_name").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),i=!1),0!=i){var j={action:"epkb_send_feedback",_wpnonce_epkb_send_feedback:a("#_wpnonce_epkb_send_feedback").val(),email:g,name:h,feedback:f};a.ajax({type:"POST",dataType:"json",data:j,url:ajaxurl,beforeSend:function(b){a("#epkb-ajax-in-progress-feedback").dialog("open")}}).done(function(a){a=a||"",e=a.error||void 0==a.message?a.message?a.message:c("",epkb_vars.reload_try_again,"error"):a.message}).fail(function(a,b,d){e=d?" ["+d+"]":epkb_vars.unknown_error,e=c(epkb_vars.error_occurred,e,"error")}).always(function(){a("#epkb-ajax-in-progress-feedback").dialog("close"),e&&(a("#ekb_core_top_heading").replaceWith(e),a("html, body").animate({scrollTop:0},"slow"))})}}),b.find("#close_intro").on("click",function(){b.find(".welcome_header").hide();var c={action:"epkb_close_welcome_header"};a.ajax({type:"POST",dataType:"json",url:ajaxurl,data:c})}),function(){b.find(".featured_img").on("click",function(c){c.preventDefault(),c.stopPropagation(),b.find(".image_zoom").remove();var d,e=a(this).find("img");d=e.length>1?a(e[0]).is(":visible")?a(e[0]).attr("src"):a(e[1]).is(":visible")?a(e[1]).attr("src"):a(e[2]).attr("src"):a(this).find("img").attr("src"),a(this).after('<div id="epkb_image_zoom" class="image_zoom"><img src="'+d+'" class="image_zoom"><span class="close icon_close"></span></div>'),a("html, body").bind("click.epkb",function(){a("#epkb_image_zoom").remove(),a("html, body").unbind("click.epkb")})})}(),a("#kb_name").on("keyup",function(){var b=a(this).val().length,c=25,d=c-b;a("#character_value").remove(),d<0&&a(this).after('<div id="character_value" class="input_error"><p>'+epkb_vars.reduce_name_size+"</p></div>")}),a("#epkb-welcome-page-img1-thumb").on("click",function(){a("#epkb-welcome-page-img1").show(),a("#epkb-welcome-page-img2").hide(),a("#epkb-welcome-page-img3").hide()}),a("#epkb-welcome-page-img2-thumb").on("click",function(){a("#epkb-welcome-page-img2").show(),a("#epkb-welcome-page-img1").hide(),a("#epkb-welcome-page-img3").hide()}),a("#epkb-welcome-page-img3-thumb").on("click",function(){a("#epkb-welcome-page-img3").show(),a("#epkb-welcome-page-img1").hide(),a("#epkb-welcome-page-img2").hide()})}(),function(){var c=a("#epkb-dialog-info-icon").dialog({resizable:!1,autoOpen:!1,modal:!0,buttons:{Ok:function(){a(this).dialog("close")}},close:function(){a("#epkb-dialog-info-icon-msg").html()}});b.find(".ekb-admin-page-tab-panel, .epkb-config-sidebar-options").on("click",".info-icon",function(){var b=!1,d="",e=a(this).parent().find(".label").text();e=e||"";var f=a(this).find("p").html();if(f){var g=f.split("@");f=g[0]?g[0]:"Help text is coming soon.",g[1]&&(b=!0,d='<img class="epkb-help-image" src="'+g[1]+'">')}else f="Help text is coming soon.";a("#epkb-dialog-info-icon-msg").html("<p>"+f+"</p><br/>"+d),c.dialog({title:e,width:b?1e3:400,maxHeight:b?750:300,open:function(){a("#epkb-dialog-info-icon").find(".epkb-help-image").one("load",function(){c.dialog("option",{position:{my:"center",at:"center",of:window}})}),a(".ui-widget-overlay").bind("click",function(){a("#epkb-dialog-info-icon").dialog("close")})}}).dialog("open")}),a("#epkb-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide(),a("#epkb-ajax-in-progress-feedback").dialog({resizable:!1,height:70,width:300,modal:!0,autoOpen:!1}).hide(),a(".ui-dialog-titlebar").hide()}()});